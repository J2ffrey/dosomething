<script type="text/javascript">
	document.getElementById("s_word").addEventListener("keydown", function(e) {
      if (!e) { var e = window.event; }
      // Enter is pressed
      if (e.keyCode == 13) { filter(); }
  }, false);
  
	function filter(){
			    var site_text = "/home/filter?" + 'region=' + $('#region_select').val()
		 			+ '&school=' + $('#school_select').val()
	  			+ '&btime=' + $('#btime_select').val()
	  			+ '&category=' + $('#category_select').val()
	  			+ '&s_word=' + $('#s_word').val()
	  			;
			
				$('#main_contents').load(site_text);
				
				return false;
  }
  
  $(function(){    
    $("#region_select, #school_select, #btime_select, #category_select").on("change", function(){
  		$.ajax({
  			type:"get",
  			url:"/home/filter?" + 'region=' + $('#region_select').val() 
  			+ '&school=' + $('#school_select').val() 
  			+ '&btime=' + $('#btime_select').val() 
  			+ '&category=' + $('#category_select').val()
  			+ '&s_word=' + $('#s_word').val(),
  			datatype:"html",
  			success:function(r){
  				$("#main_contents").empty();
  				$("#main_contents").append("<style>"+r+"</style>");
  			},
  			error:function(){
  				alert("데이터를 가져오지 못하였습니다.");
  			},
  		});
    })
    
  })
</script>